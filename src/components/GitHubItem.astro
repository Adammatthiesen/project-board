---
import type { GitHubItem } from '../lib/github';

interface Props {
  item: GitHubItem;
}

const { item } = Astro.props;

const typeColors = {
  issue: '#3b82f6',
  pr: '#10b981',
  discussion: '#f59e0b'
};

const typeLabels = {
  issue: 'Issue',
  pr: 'Pull Request',
  discussion: 'Discussion'
};

const stateColors = {
  open: '#10b981',
  closed: '#ef4444',
  merged: '#a855f7'
};
---

<article class="github-item">
  <div class="item-header">
    <span class="item-type" style={`background-color: ${typeColors[item.type]}`}>
      {typeLabels[item.type]}
    </span>
    <span class="item-state" style={`color: ${stateColors[item.state as keyof typeof stateColors] || '#6b7280'}`}>
      {item.state}
    </span>
    {item.repository && <span class="item-repo">{item.repository}</span>}
  </div>
  
  <h3 class="item-title">
    <a href={item.html_url} target="_blank" rel="noopener noreferrer">
      #{item.number} {item.title}
    </a>
  </h3>
  
  <div class="item-meta">
    <img src={item.user.avatar_url} alt={item.user.login} class="user-avatar" />
    <span class="user-login">@{item.user.login}</span>
    <span class="item-date">Updated: {new Date(item.updated_at).toLocaleDateString()}</span>
  </div>
  
  {item.labels.length > 0 && (
    <div class="item-labels">
      {item.labels.map(label => (
        <span class="label" style={`background-color: #${label.color}22; border-color: #${label.color}`}>
          {label.name}
        </span>
      ))}
    </div>
  )}
</article>
